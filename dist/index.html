<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=1, viewport-fit=cover">
  <title>FitMunch - Your Health & Fitness Companion</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
    <nav class="sidebar">
      <div class="logo">
        <i class="fas fa-leaf"></i>
        <h1>FitMunch</h1>
      </div>
      <div class="nav-items">
        <button data-section="dashboard" class="nav-item active">
          <i class="fas fa-home"></i>Dashboard
        </button>
        <button data-section="workout" class="nav-item">
          <i class="fas fa-dumbbell"></i>Workout Plan
        </button>
        <button data-section="food" class="nav-item">
          <i class="fas fa-utensils"></i>Food Log
        </button>
        <button data-section="meal" class="nav-item">
          <i class="fas fa-calendar-alt"></i>Meal Plan
        </button>
        <button data-section="shopping" class="nav-item">
          <i class="fas fa-shopping-cart"></i>Shopping
        </button>
        <button data-section="fitness" class="nav-item">
          <i class="fas fa-link"></i>Connect Apps
        </button>
        <a href="developer_dashboard.html" class="nav-item dev-link">
          <i class="fas fa-microchip"></i>Grok Developer
        </a>
      </div>
    </nav>

    <main class="main-content">
      <div class="promo-banner">
        <div class="banner-content">
          <h2><i class="fas fa-crown"></i> Unlock Premium Features Today!</h2>
          <p>Get personalized meal plans, AI coaching, and advanced analytics - <strong>30% OFF for a limited time!</strong></p>
          <div class="banner-cta">
            <button class="banner-btn">Upgrade Now</button>
            <span class="banner-discount">Save 30%</span>
          </div>
        </div>
      </div>

      <section id="dashboard" class="active-section">
        <div class="dashboard-header">
          <div class="profile-header">
            <div class="wellness-score">
              <div class="score-circle">
                <span class="score">85</span>
                <span class="label">Wellness Score</span>
              </div>
            </div>
            <div class="profile-info">
              <div class="user-menu">
                <button class="user-menu-btn">
                  <div class="profile-image">
                    <i class="fas fa-user"></i>
                  </div>
                  <i class="fas fa-chevron-down"></i>
                </button>
                <div class="dropdown-menu">
                  <button onclick="editProfile()"><i class="fas fa-user-edit"></i> Edit Profile</button>
                  <button onclick="showSection('settings')"><i class="fas fa-cog"></i> Settings</button>
                  <button class="danger"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
              </div>
              <div>
                <h2>Welcome Back, <span id="userName">User</span>!</h2>
                <p class="date">Today: <span id="currentDate"></span></p>
                <p class="profile-stats">Height: <span id="userHeight">--</span> | Weight: <span id="userWeight">--</span></p>
                <p id="fitnessConnectionStatus" class="fitness-connection-status">
                  <i class="fas fa-unlink" style="color: #777;"></i>
                  No fitness apps connected
                </p>
                <div class="goals-summary">

<!-- Subscription Section will be dynamically created -->
<section id="subscription" style="display: none;">
  <div id="subscription-container"></div>
</section>

                  <p>Daily Goals Progress:</p>
                  <div class="goal-progress">
                    <span>Calories: <span id="calorieProgress">0/2000</span></span>
                    <span>Steps: <span id="stepsProgress">0/8000</span></span>
                    <span>Activity: <span id="activityProgress">--</span></span>
                  </div>
                </div>
              </div>
            </div>
            <button onclick="editProfile()" class="edit-profile-btn"><i class="fas fa-edit"></i> Edit Profile</button>
            <a href="fitness_connection.html" class="connect-fitness-btn">Connect Fitness App</a>
          </div>
        </div>
        <div class="promo-cards">
          <a href="javascript:void(0);" class="promo-card" data-page="workout" onclick="showSection('workout')">
            <img src="https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=800&q=90" alt="Fitness coaching">
            <h3>Personal Coaching</h3>
            <p>Get matched with expert trainers</p>
          </a>
          <a href="javascript:void(0);" class="promo-card" data-page="meal" onclick="showSection('meal')">
            <img src="https://images.unsplash.com/photo-1532384748853-8f54a8f476e2?w=800&q=90" alt="Meal planning">
            <h3>Meal Planning</h3>
            <p>Customized nutrition plans</p>
          </a>
        </div>

        <div class="quick-nav-cards">
          <a href="javascript:void(0);" class="nav-card" data-page="food" onclick="showSection('food')">
            <i class="fas fa-utensils"></i>
            <h3>Food Log</h3>
            <p>Track your daily meals</p>
          </a>
          <a href="javascript:void(0);" class="nav-card" data-page="shopping" onclick="showSection('shopping')">
            <i class="fas fa-shopping-cart"></i>

    <section id="premium-features" class="hidden-section">
      <div id="premium-features-container"></div>
    </section>

            <h3>Shopping List</h3>
            <p>Plan your grocery shopping</p>
          </a>
        </div>
        <div class="stats-grid">
          <div class="stat-card">
            <i class="fas fa-fire"></i>
            <h3>Calories</h3>
            <p id="calorieDisplay">0 / 2000</p>
          </div>
          <div class="stat-card">
            <i class="fas fa-walking"></i>
            <h3>Steps</h3>
            <p id="stepsDisplay">0 / 8000</p>
          </div>
          <div class="stat-card">
            <i class="fas fa-weight"></i>
            <h3>Macros</h3>
            <p id="macroDisplay">P: 0g | C: 0g | F: 0g</p>
          </div>
        </div>
      </section>

      <section id="workout" class="section">
        <h2>Your Workout Plan</h2>
        <div class="workout-controls">
          <button onclick="editWorkoutPlan()" class="primary-btn">
            <i class="fas fa-edit"></i> Customize Plan
          </button>
          <button onclick="regenerateWorkoutPlan()" class="primary-btn">
            <i class="fas fa-sync"></i> Regenerate
          </button>
        </div>
        <div id="workoutPlanDisplay" class="workout-plan-display"></div>
        <div id="weeklyScheduleDisplay" class="weekly-schedule"></div>
      </section>

      <div id="profileModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModal()">&times;</span>
          <h2>Edit Profile & Goals</h2>
          <div class="form-grid">
            <div class="input-group">
              <label for="userHeight">Height (cm)</label>
              <input type="number" id="userHeight" placeholder="Enter height">
            </div>
            <div class="input-group">
              <label for="userWeight">Weight (kg)</label>
              <input type="number" id="userWeight" placeholder="Enter weight">
            </div>
            <div class="input-group full-width">
              <label for="userGoals">Describe Your Goals</label>
              <textarea id="userGoals" placeholder="Tell us about your fitness goals, current lifestyle, and what you want to achieve..." rows="4"></textarea>
            </div>
            <div class="input-group">
              <label for="calories">Daily Calories Target</label>
              <input type="number" id="calories" placeholder="e.g., 2000">
            </div>
            <div class="input-group">
              <label for="steps">Daily Steps Target</label>
              <input type="number" id="steps" placeholder="e.g., 8000">
            </div>
            <div class="input-group">
              <label for="activityType">Activity Type</label>
              <select id="activityType">
                <option value="run">Running</option>
                <option value="gym">Gym Workout</option>
                <option value="swim">Swimming</option>
                <option value="fitness">Fitness Classes</option>
                <option value="yoga">Yoga</option>
              </select>
            </div>
            <div class="input-group">
              <label for="frequency">Weekly Frequency</label>
              <input type="number" id="frequency" min="1" max="7" placeholder="e.g., 3">
            </div>
            <div class="input-group">
              <label for="activityLevel">Activity Level</label>
              <select id="activityLevel">
                <option value="Beginner">Beginner</option>
                <option value="Intermediate">Intermediate</option>
                <option value="Advanced">Advanced</option>
              </select>
            </div>
            <div class="input-group">
              <label for="duration">Duration (hours)</label>
              <input type="number" id="duration" min="0.5" max="4" step="0.5" placeholder="e.g., 1">
            </div>
            <div class="input-group">
              <label for="preferredTime">Preferred Time</label>
              <select id="preferredTime">
                <option value="Morning (6-9)">Morning (6-9)</option>
                <option value="Mid-morning (9-12)">Mid-morning (9-12)</option>
                <option value="Afternoon (12-4)">Afternoon (12-4)</option>
                <option value="Evening (4-8)">Evening (4-8)</option>
              </select>
            </div>
          </div>
          <div class="modal-buttons">
            <button onclick="saveGoals()" class="primary-btn">Save Goals</button>
            <button onclick="closeModal()" class="secondary-btn">Cancel</button>
          </div>
        </div>
      </div>

      <section id="food" class="section">
        <h2>Food Log</h2>
        <div class="macro-summary">
          <canvas id="macroChart"></canvas>
          <div class="macro-stats">
            <div>Calories: <span id="totalCals">0</span>/<span id="calGoal">2000</span></div>
            <div>Protein: <span id="totalProtein">0</span>g</div>
            <div>Carbs: <span id="totalCarbs">0</span>g</div>
            <div>Fat: <span id="totalFat">0</span>g</div>
          </div>
        </div>
        <div class="meal-section">
          <div class="barcode-scanner">
            <button onclick="scanBarcode()" class="scanner-btn">
              <i class="fas fa-barcode"></i> Scan Food
            </button>
          </div>
          <select id="mealSelect" class="meal-select">
            <option value="breakfast">Breakfast</option>
            <option value="lunch">Lunch</option>
            <option value="dinner">Dinner</option>
            <option value="snacks">Snacks</option>
          </select>
          <button onclick="showFoodSearch()" class="primary-btn">
            <i class="fas fa-plus"></i> Add Food
          </button>
        </div>
        <div id="searchResults" class="food-list"></div>

        <div class="food-log-entries">
          <h3>Today's Food Entries</h3>
          <div class="meal-log-container">
            <div class="meal-log">
              <h4>Breakfast</h4>
              <ul id="breakfastLog" class="food-entries-list"></ul>
            </div>
            <div class="meal-log">
              <h4>Lunch</h4>
              <ul id="lunchLog" class="food-entries-list"></ul>
            </div>
            <div class="meal-log">
              <h4>Dinner</h4>
              <ul id="dinnerLog" class="food-entries-list"></ul>
            </div>
            <div class="meal-log">
              <h4>Snacks</h4>
              <ul id="snacksLog" class="food-entries-list"></ul>
            </div>
          </div>
        </div>
      </section>

      <section id="meal" class="section">
        <h2>Your Meal Plan</h2>
        <div class="meal-plan-controls">
          <select id="goalType" class="goal-select">
            <option value="Weight Loss">Weight Loss</option>
            <option value="Maintenance" selected>Maintenance</option>
            <option value="Muscle Gain">Muscle Gain</option>
          </select>
          <button onclick="generateMealPlan()" class="primary-btn">
            <i class="fas fa-sync"></i> Generate Plan
          </button>
        </div>
        <div class="meal-plan-card">
          <div id="mealDisplay" class="meal-description">Select a goal type to generate a meal plan.</div>
        </div>

        <div class="meal-nutritional-info">
          <h3>Nutritional Breakdown</h3>
          <div class="nutrition-grid">
            <div class="nutrient-card">
              <div class="nutrient-icon"><i class="fas fa-fire"></i></div>
              <div class="nutrient-info">
                <h4>Daily Calories</h4>
                <span id="mealCalories">2000</span>
              </div>
            </div>
            <div class="nutrient-card">
              <div class="nutrient-icon"><i class="fas fa-drumstick-bite"></i></div>
              <div class="nutrient-info">
                <h4>Protein</h4>
                <span id="mealProtein">150g</span>
              </div>
            </div>
            <div class="nutrient-card">
              <div class="nutrient-icon"><i class="fas fa-bread-slice"></i></div>
              <div class="nutrient-info">
                <h4>Carbs</h4>
                <span id="mealCarbs">200g</span>
              </div>
            </div>
            <div class="nutrient-card">
              <div class="nutrient-icon"><i class="fas fa-cheese"></i></div>
              <div class="nutrient-info">
                <h4>Fat</h4>
                <span id="mealFat">65g</span>
              </div>
            </div>
          </div>
        </div>

        <div class="meal-plan-cost-analysis">
          <h3>Cost Analysis</h3>
          <div class="cost-breakdown">
            <div class="cost-item">
              <span class="cost-label">Estimated Daily Cost:</span>
              <span class="cost-value" id="dailyCost">$18.30</span>
            </div>
            <div class="cost-item">
              <span class="cost-label">Estimated Weekly Cost:</span>
              <span class="cost-value" id="weeklyCost">$128.10</span>
            </div>
          </div>
          <div class="cost-savings">
            <i class="fas fa-tags"></i> Premium members save up to 15% with partner discounts at Coles and Woolworths
          </div>
        </div>
      </section>

      <section id="shopping" class="section">
        <h2>Shopping List</h2>
        <div class="shopping-list-controls">
          <select id="shopListType" class="goal-select">
            <option value="Weight Loss">Weight Loss</option>
            <option value="Maintenance" selected>Maintenance</option>
            <option value="Muscle Gain">Muscle Gain</option>
          </select>
          <div class="shopping-stats">
            <span class="stat">Total Cost: <span id="totalCost">$0.00</span></span>
            <span class="stat">Items: <span id="totalItems">0</span></span>
          </div>
        </div>
        <div class="shopping-list-container">
          <h3>Your Weekly Shopping List</h3>
          <div class="shop-list-header">
            <span class="item-name">Item</span>
            <span class="item-quantity">Quantity</span>
            <span class="item-cost">Est. Cost</span>
          </div>
          <ul id="shopList" class="shopping-list">
            <li class="shopping-item">Loading shopping list...</li>
          </ul>
        </div>
        <div class="shopping-summary">
          <div class="nutritional-summary">
            <h4>Weekly Nutritional Totals</h4>
            <div id="macroTotals" class="macro-totals">
              <div class="macro-item">Protein: <span id="totalProteinWeek">0g</span></div>
              <div class="macro-item">Carbs: <span id="totalCarbsWeek">0g</span></div>
              <div class="macro-item">Fat: <span id="totalFatWeek">0g</span></div>
              <div class="macro-item">Calories: <span id="totalCaloriesWeek">0</span></div>
            </div>
          </div>
        </div>
        <div class="supermarket-options">
          <h4>Available at</h4>
          <div class="supermarket-logos">
            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Coles_logo.svg/200px-Coles_logo.svg.png" alt="Coles" class="market-logo">
            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/a/a3/Woolworths_Supermarkets_logo.svg/200px-Woolworths_Supermarkets_logo.svg.png" alt="Woolworths" class="market-logo">
            <img src="https://upload.wikimedia.org/wikipedia/en/thumb/c/c5/Aldi_logo.svg/200px-Aldi_logo.svg.png" alt="Aldi" class="market-logo">
          </div>
        </div>
      </section>
      <section id="fitness" class="section">
        <div class="section-header">
          <h2><i class="fas fa-link"></i> Connect Your Fitness Apps</h2>
          <p>Enhance your FitMunch experience by connecting with your fitness devices and apps.</p>
        </div>

        <div class="fitness-redirect-container">
          <div class="fitness-intro">
            <img src="https://images.unsplash.com/photo-1557800636-894a64c1696f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=80" alt="Fitness tracking devices" class="fitness-intro-image">
            <div class="fitness-intro-content">
              <h3>Sync Your Health & Fitness Data</h3>
              <p>Connect your favorite fitness apps and devices to automatically import your activity data, workouts, and nutrition information into FitMunch for a complete health and fitness picture.</p>
              <ul class="fitness-benefits">
                <li><i class="fas fa-check-circle"></i> Automatic activity tracking</li>
                <li><i class="fas fa-check-circle"></i> Seamless workout syncing</li>

  <script src="generateActivityPlan.js" defer></script>

                <li><i class="fas fa-check-circle"></i> Real-time health metrics</li>
                <li><i class="fas fa-check-circle"></i> Personalized recommendations</li>
              </ul>
              <a href="fitness_connection.html" class="primary-btn">
                <i class="fas fa-plug"></i> Connect Your Devices
              </a>
            </div>
          </div>

          <div class="connected-apps-preview">
            <h3>Available Integrations</h3>
            <div class="app-icons">
              <div class="app-icon"><i class="fab fa-google"></i> Google Fit</div>
              <div class="app-icon"><i class="fab fa-apple"></i> Apple Health</div>
              <div class="app-icon"><i class="fas fa-heartbeat"></i> Fitbit</div>
              <div class="app-icon"><i class="fab fa-samsung"></i> Samsung Health</div>
              <div class="app-icon"><i class="fas fa-mountain"></i> Garmin</div>
              <div class="app-icon"><i class="fas fa-running"></i> Strava</div>
            </div>
          </div>
        </div>
      </section>
    </main>

    <div class="grok-feedback">
      <button class="grok-toggle" id="toggleGrok">
        <i class="fas fa-robot"></i>
      </button>
      <div class="grok-panel" id="grokPanel">
        <div class="grok-header">
          <h3><i class="fas fa-microchip"></i> Grok Assistant</h3>
          <button class="grok-close" id="closeGrok">
            <i class="fas fa-times"></i>
          </button>
        </div>

<!-- Workout Log Modal -->
<div id="workoutLogModal" class="workout-log-modal">
  <div class="workout-log-content">
    <div class="workout-log-header">
      <h3>Log Workout: <span id="logExerciseName"></span></h3>
      <button class="workout-log-close" onclick="closeWorkoutLog()">&times;</button>
    </div>
    <div class="log-form">
      <div id="gymMetrics" class="gym-metrics">
        <div class="log-metrics">
          <div class="input-group">
            <label for="weight">Weight</label>
            <input type="number" id="weight" placeholder="Weight (kg)">
          </div>
          <div class="input-group">
            <label for="reps">Reps</label>
            <input type="number" id="reps" placeholder="Repetitions">
          </div>
          <div class="input-group">
            <label for="sets">Sets</label>
            <input type="number" id="sets" placeholder="Sets completed">
          </div>
        </div>
      </div>
      <div id="runMetrics" class="run-metrics">
        <div class="log-metrics">
          <div class="input-group">
            <label for="distance">Distance</label>
            <input type="number" id="distance" placeholder="Distance (km)">
          </div>
          <div class="input-group">
            <label for="duration">Duration</label>
            <input type="number" id="duration" placeholder="Minutes">
          </div>
          <div class="input-group">
            <label for="pace">Pace</label>
            <input type="text" id="pace" placeholder="Min/km">
          </div>
        </div>
      </div>
      <div id="yogaMetrics" class="yoga-metrics">
        <div class="log-metrics">
          <div class="input-group">
            <label for="duration">Duration</label>
            <input type="number" id="yogaDuration" placeholder="Minutes">
          </div>
          <div class="input-group">
            <label for="difficulty">Difficulty (1-10)</label>
            <input type="number" id="difficulty" min="1" max="10" placeholder="Difficulty level">
          </div>
        </div>
      </div>
      <div class="input-group full-width">
        <label for="workoutNotes">Notes</label>
        <textarea id="workoutNotes" placeholder="How did it go? Any challenges?" rows="3"></textarea>
      </div>
      <div class="modal-buttons">
        <button onclick="saveWorkoutLog()" class="primary-btn">Save Log</button>
      </div>
    </div>
    <div id="workoutHistory" class="workout-history">
      <h4>Previous Logs</h4>
      <div id="historyEntries"></div>
    </div>
  </div>
</div>

        <div class="grok-content">
          <div class="grok-messages" id="grokMessages">
            <div class="grok-message incoming">
              <div class="message-avatar">
                <i class="fas fa-robot"></i>
              </div>
              <div class="message-content">
                <p>Hello! I'm Grok, your AI assistant. I'm analyzing your health and fitness data to provide personalized insights.</p>
              </div>
            </div>
          </div>
          <div class="grok-input">
            <input type="text" id="userMessage" placeholder="Ask Grok a question...">
            <button id="sendMessage">
              <i class="fas fa-paper-plane"></i>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
  <!-- Load navigation fix first to ensure it's available before other scripts -->
  <script src="navigation_fix.js"></script>

  <!-- Core functionality -->
  <script src="script.js"></script>
  <script src="user_interaction_test.js"></script>

  <!-- Additional functionality -->
  <script src="exercise_tracker.js" defer></script>
  <script src="api_service.js" defer></script>
  <script src="supermarket_api.js" defer></script>
  <script src="fitness_connector.js" defer></script>
  <script src="monetization.js" defer></script>
  <script src="subscription-ui.js" defer></script>
  <script src="analytics.js" defer></script>
  <script src="social_sharing.js" defer></script>
  <script src="growth_optimization.js" defer></script>
  <script src="seo_optimization.js" defer></script>

  <!-- Load workout plan generator -->
  <script src="generateActivityPlan.js" defer></script>

  <!-- Load app fixes last to ensure it can fix any issues from other scripts -->
  <script src="app_fixes.js" defer></script>
  <script src="app_button_fix.js" defer></script>

  <!-- Initialize workout log modal functions -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Add global delegated event listener for all exercise log buttons that might be added dynamically
      document.body.addEventListener('click', function(e) {
        // Handle log exercise buttons
        if (e.target && (e.target.classList.contains('exercise-log-btn') || e.target.parentElement.classList.contains('exercise-log-btn'))) {
          e.preventDefault();
          e.stopPropagation();

          // Find the button (might be the icon inside the button that was clicked)
          const btn = e.target.classList.contains('exercise-log-btn') ? e.target : e.target.parentElement;

          // Get exercise name from data attribute or from the row
          const exerciseName = btn.getAttribute('data-exercise') || 
                               btn.closest('.exercise-row')?.querySelector('.exercise-name')?.textContent.trim();

          if (exerciseName) {
            console.log("Logging workout for:", exerciseName);
            if (typeof window.showWorkoutLog === 'function') {
              window.showWorkoutLog(exerciseName);
            } else {
              // Fallback if function not defined
              const modal = document.getElementById('workoutLogModal');
              if (modal) {
                const nameElement = document.getElementById('logExerciseName');
                if (nameElement) nameElement.textContent = exerciseName;
                modal.style.display = 'block';
              } else {
                console.error("Could not find workout log modal");
              }
            }
          }
        }

        // Handle workout log close button
        if (e.target && (e.target.classList.contains('workout-log-close') || 
                        (e.target.parentElement && e.target.parentElement.classList.contains('workout-log-close')))) {
          if (typeof window.closeWorkoutLog === 'function') {
            window.closeWorkoutLog();
          } else {
            const modal = document.getElementById('workoutLogModal');
            if (modal) modal.style.display = 'none';
          }
        }

        // Handle workout log save button
        if (e.target && (e.target.classList.contains('primary-btn') && e.target.closest('.workout-log-content'))) {
          if (typeof window.saveWorkoutLog === 'function') {
            window.saveWorkoutLog();
          } else {
            // Fallback implementation
            const exerciseName = document.getElementById('logExerciseName').textContent;
            alert(`Workout logged for ${exerciseName}`);
            const modal = document.getElementById('workoutLogModal');
            if (modal) modal.style.display = 'none';
          }
        }
      });

      // Ensure the modal starts hidden
      const modal = document.getElementById('workoutLogModal');
      if (modal) {
        modal.style.display = 'none';
      }
    });
  </script>

  <!-- Initialize referral widget -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize analytics first
      if (typeof AnalyticsService !== 'undefined') {
        AnalyticsService.initialize();
      }

      // Add referral widget when growth optimization is available
      if (typeof GrowthOptimizationService !== 'undefined') {
        const referralContainer = document.getElementById('referral-container');
        if (referralContainer) {
          // Use a placeholder user ID until real auth is implemented
          const userId = localStorage.getItem('userId') || 'user_' + Math.random().toString(36).substring(2, 15);
          localStorage.setItem('userId', userId);

          GrowthOptimizationService.createReferralWidget(referralContainer, userId);
        }
      }
    });
  </script>
</body>
</html>